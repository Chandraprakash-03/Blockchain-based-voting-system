<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Connect | Vote Right</title>
    <link rel="shortcut icon" href="dependencies/logo.png" type="image/x-icon">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    <link rel="stylesheet" href="styles.css" />
</head>

<body>
    <div class="container">
        <div class="left-bar">
            <div class="top-bar"></div>
        </div>
        <div class="main-content">
            <div class="connect-container">
                <center>
                    <div class="logo">
                        <img src="../frontend/dependencies/logo.svg" alt="" />
                    </div>
                    <br />
                    <p>
                        Connect your Wallet to <br />
                        Continue
                    </p>
                    <br />
                    <button id="connectButton">Connect Wallet</button>
                </center>
            </div>
        </div>
        <div class="header"></div>
    </div>

    <script>
        const connectButton = document.getElementById('connectButton');

        async function connectWallet() {
            if (typeof window.ethereum !== 'undefined') {
                try {

                    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                    const account = accounts[0];


                    localStorage.setItem('connectedAccount', account);


                    window.location.href = 'vote.html';
                } catch (error) {
                    console.error('User denied account access:', error);
                }
            } else {
                alert('Please install MetaMask to use this application!');
            }
        }

        connectButton.addEventListener('click', connectWallet);
    </script>
</body>

</html>